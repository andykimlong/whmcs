<?php
/*
 * @ PHP 7.2
 * @ Decoder version : 1.0.0.4
 * @ Release on : 09/06/2021
 * @ Website    : http://EasyToYou.eu
 */

echo "<div class=\"modal modal-marketconnect-login fade\" tabindex=\"-1\" role=\"dialog\" id=\"loginModal\">\n    <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n            <div class=\"modal-header\">\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\n                <h4 class=\"modal-title\" id=\"myModalLabel\">";
echo AdminLang::trans("marketConnect.loginCreate");
echo "</h4>\n            </div>\n            <div class=\"modal-body\">\n                <div class=\"modal-mc-logo\">\n                    <img src=\"../assets/img/marketconnect/logo.png\" class=\"marketconnect-logo\" id=\"marketconnectLogo\">\n                </div>\n                <div id=\"loginFormContainer\">\n                    <p class=\"login-msg\">You can login using either your <a href=\"https://marketplace.whmcs.com/\" target=\"_blank\">WHMCS Marketplace</a> or <a href=\"https://www.whmcs.com/members/\" target=\"_blank\">WHMCS Members Area</a> login details.</p>\n                    <div class=\"alert alert-danger hidden\" id=\"alertLoginFailed\"></div>\n                    <form class=\"form-horizontal\" id=\"frmLogin\">\n                        <div class=\"form-group\">\n                            <label for=\"inputLoginEmail\" class=\"col-sm-3 control-label\">Email</label>\n                            <div class=\"col-sm-8\">\n                                <input type=\"email\" name=\"email\" class=\"form-control\" id=\"inputLoginEmail\" placeholder=\"Email\">\n                            </div>\n                        </div>\n                        <div class=\"form-group\">\n                            <label for=\"inputLoginPassword\" class=\"col-sm-3 control-label\">Password</label>\n                            <div class=\"col-sm-8\">\n                                <input type=\"password\" name=\"password\" class=\"form-control\" id=\"inputLoginPassword\" placeholder=\"Password\">\n                            </div>\n                        </div>\n                        <div class=\"form-group\">\n                            <div class=\"col-sm-12 text-center\">\n                                <label class=\"checkbox-inline\">\n                                    <input type=\"checkbox\" name=\"agreetos\" value=\"1\">\n                                    I agree to the <a href=\"https://marketplace.whmcs.com/policies/terms\" target=\"_blank\">WHMCS Marketplace Terms of Service</a>\n                                </label>\n                            </div>\n                        </div>\n                        <div class=\"form-group\">\n                            <div class=\"col-sm-12 text-center\">\n                                <button type=\"submit\" class=\"btn btn-default\">Login</button>\n                            </div>\n                        </div>\n                    </form>\n                    <p class=\"create-acct-link\">Not registered? <a href=\"#\" id=\"btnShowRegisterForm\">Create a free WHMCS Marketplace account</a></p>\n                </div>\n                <div id=\"registerFormContainer\" class=\"hidden\">\n                    <p class=\"text-center\">Create a WHMCS Marketplace account and get started instantly.</p>\n                    <div class=\"alert alert-danger hidden\" id=\"alertRegisterFailed\"></div>\n                    <form class=\"form-horizontal\" id=\"frmRegister\">\n                        <div class=\"form-group\">\n                            <label for=\"inputRegisterFirstName\" class=\"col-sm-4 control-label\">First Name</label>\n                            <div class=\"col-sm-7\">\n                                <input type=\"text\" name=\"firstname\" class=\"form-control\" id=\"inputRegisterFirstName\" placeholder=\"First Name\" value=\"";
echo $registerInfo["admin"]->firstName;
echo "\">\n                            </div>\n                        </div>\n                        <div class=\"form-group\">\n                            <label for=\"inputRegisterLastName\" class=\"col-sm-4 control-label\">Last Name</label>\n                            <div class=\"col-sm-7\">\n                                <input type=\"text\" name=\"lastname\" class=\"form-control\" id=\"inputRegisterLastName\" placeholder=\"Last Name\" value=\"";
echo $registerInfo["admin"]->lastName;
echo "\">\n                            </div>\n                        </div>\n                        <div class=\"form-group\">\n                            <label for=\"inputRegisterCompanyName\" class=\"col-sm-4 control-label\">Company Name</label>\n                            <div class=\"col-sm-7\">\n                                <input type=\"text\" name=\"companyname\" class=\"form-control\" id=\"inputRegisterCompanyName\" placeholder=\"Company Name\" value=\"";
echo $registerInfo["companyName"];
echo "\">\n                            </div>\n                        </div>\n                        <div class=\"form-group\">\n                            <label for=\"inputRegisterEmail\" class=\"col-sm-4 control-label\">Email</label>\n                            <div class=\"col-sm-7\">\n                                <input type=\"email\" name=\"email\" class=\"form-control\" id=\"inputRegisterEmail\" placeholder=\"Email\" value=\"";
echo $registerInfo["admin"]->email;
echo "\">\n                            </div>\n                        </div>\n                        <div class=\"form-group\">\n                            <label for=\"inputPassword3\" class=\"col-sm-4 control-label\">Password</label>\n                            <div class=\"col-sm-7\">\n                                <input type=\"password\" name=\"password\" class=\"form-control\" id=\"inputPassword3\" placeholder=\"Password\">\n                            </div>\n                        </div>\n                        <div class=\"form-group\">\n                            <div class=\"col-sm-12 text-center\">\n                                <label class=\"checkbox-inline\">\n                                    <input type=\"checkbox\" name=\"agreetos\" value=\"1\">\n                                    I agree to the <a href=\"https://marketplace.whmcs.com/policies/terms\" target=\"_blank\">WHMCS Marketplace Terms of Service</a>\n                                </label>\n                            </div>\n                        </div>\n                        <div class=\"form-group\">\n                            <div class=\"col-sm-12 text-center\">\n                                <button type=\"submit\" class=\"btn btn-default\">Create Account</button>\n                            </div>\n                        </div>\n                        <input type=\"hidden\" name=\"returnAction\" value=\"\" id=\"returnAction\">\n                    </form>\n                    <br>\n                    <p>Already registered? <a href=\"#\" id=\"btnShowLoginForm\">Login here</a></p>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<script>\n    \$(document).ready(function() {\n        var spinner = jQuery('<i class=\"fas fa-spinner fa-spin\"></i>'),\n            activeBtn = function(e) { e.prop('disabled', true).prepend(spinner); },\n            resetBtn = function(e) { e.removeProp('disabled').find(spinner).remove(); };\n        \$('body').addClass('market-connect');\n        \$('.account-refresh').click(function(e) {\n            e.preventDefault();\n            \$('.points-container').hide();\n            \$('.retrieving-container').removeClass('hidden').show();\n            WHMCS.http.jqClient.post('marketconnect.php', 'action=getBalance&token=' + csrfToken, function(data) {\n                if (data.error) {\n                    \$('.linked-to').hide();\n                    \$('.connection-error').show();\n                } else if (data.authError) {\n                    \$('.linked-to').hide();\n                    \$('.auth-error').show();\n                } else {\n                    \$('.points-container .balance').html(data.balance);\n                    \$('.balance-last-updated').html(data.updatedDiff);\n                }\n                \$('.retrieving-container').hide();\n                \$('.points-container').removeClass('hidden').show();\n            }, 'json');\n        });\n        ";
if ($balanceNeedsUpdate) {
    echo "        \$('.account-refresh').click();\n        ";
}
echo "        \$('a.deposit-funds').click(function(e) {\n            e.preventDefault();\n            \$('#frmDepositFunds').submit();\n        });\n        \$('#frmLogin').submit(function(e) {\n            e.preventDefault();\n            var btn = \$('#frmLogin button[type=\"submit\"]'),\n                errMsg = \$('#alertLoginFailed');\n            errMsg.addClass('hidden');\n            activeBtn(btn);\n            WHMCS.http.jqClient.post('marketconnect.php', 'action=link&token=' + csrfToken + '&' + \$(this).serialize(), function(data) {\n                if (data.error) {\n                    errMsg.html(data.error).hide().removeClass('hidden').fadeIn();\n                } else {\n                    \$('#loginModal').modal('hide');\n                    \$('.account-email').html(data.email);\n                    \$('.points-container .balance').html(data.balance);\n                    \$('.balance-last-updated').html(data.updatedDiff);\n                    \$('.retrieving-container, .auth-error, .connection-error').hide();\n                    \$('.linked-to').show();\n                    \$('.retrieving-container').hide();\n                    \$('.points-container').removeClass('hidden').show();\n                    \$('.panel-market-account').addClass('account-linked');\n                    swal({\n                        title: \"Success!\",\n                        text: \"You have successfully linked your WHMCS installation to the WHMCS Marketplace!\",\n                        type: \"success\",\n                    }, function(){\n                        var returnAction = \$('#returnAction').val(),\n                            itemToClick = '#btnActivate';\n                        if (returnAction) {\n                            if (returnAction.endsWith('-advanced')){\n                                itemToClick = '.do-advanced-setup-mode'\n                                returnAction = returnAction.substr(0, returnAction.length-9);\n                            }\n                            openModal(\n                                'marketconnect.php',\n                                'action=showLearnMore&activate=true&service='+returnAction,\n                                '',\n                                'modal-lg',\n                                'modal-mc-service'\n                            );\n                            triggerActivation();\n                            function triggerActivation() {\n                                if (\$(itemToClick).is(':visible')) {\n                                    \$(itemToClick).trigger('click');\n                                } else {\n                                    setTimeout(triggerActivation, 500);\n                                }\n                            }\n                        }\n                    });\n\n                }\n                resetBtn(btn);\n            }).fail(function(xhr, errorMsg) {\n                errMsg.html(errorMsg).hide().removeClass('hidden').fadeIn();\n                resetBtn(btn);\n            });\n        });\n        \$('#frmRegister').submit(function(e) {\n            e.preventDefault();\n            var btn = \$('#frmRegister button[type=\"submit\"]'),\n                errMsg = \$('#alertRegisterFailed');\n            errMsg.addClass('hidden');\n            activeBtn(btn);\n            WHMCS.http.jqClient.post('marketconnect.php', 'action=register&token=' + csrfToken + '&' + \$(this).serialize(), function(data) {\n                if (data.error) {\n                    errMsg.html(data.error).hide().removeClass('hidden').fadeIn();\n                } else {\n                    swal(\"Success!\", \"Your account has been created! Please check your email to verify your account.\", \"success\");\n                    \$('#loginModal').modal('hide');\n                    \$('.account-email').html(data.email);\n                    \$('.points-container .balance').html(data.balance);\n                    \$('.balance-last-updated').html(data.updatedDiff);\n                    \$('.retrieving-container, .auth-error, .connection-error').hide();\n                    \$('.linked-to').show();\n                    \$('.points-container').removeClass('hidden').show();\n                    \$('.panel-market-account').addClass('account-linked');\n                }\n                resetBtn(btn);\n            }).fail(function(xhr, errorMsg) {\n                errMsg.html(errorMsg).hide().removeClass('hidden').fadeIn();\n                resetBtn(btn);\n            });\n        });\n        \$('#btnDisconnect').click(function(e) {\n            e.preventDefault();\n            swal({\n                    title: \"Are you sure?\",\n                    text: \"Disconnecting your WHMCS installation from the current WHMCS Marketplace account will mean you can no longer manage any services provisioned while using this account until it is re-connected.\",\n                    type: \"warning\",\n                    showCancelButton: true,\n                    confirmButtonColor: \"#DD6B55\",\n                    confirmButtonText: \"Yes, disconnect my account\",\n                    closeOnConfirm: false\n                },\n                function(){\n                    swal(\"Disconnected\", \"Your WHMCS installation has now been disconnected.\", \"success\");\n                    WHMCS.http.jqClient.post('marketconnect.php', 'action=disconnect&token=' + csrfToken);\n                    \$('.panel-market-account').removeClass('account-linked');\n                });\n        });\n        \$('#btnShowRegisterForm').click(function(e) {\n            e.preventDefault();\n            \$('#alertRegisterFailed').addClass('hidden');\n            \$('#loginFormContainer').hide();\n            \$('#registerFormContainer').hide().removeClass('hidden').fadeIn();\n        });\n        \$('#btnShowLoginForm').click(function(e) {\n            e.preventDefault();\n            \$('#alertLoginFailed').addClass('hidden');\n            \$('#registerFormContainer').hide();\n            \$('#loginFormContainer').hide().removeClass('hidden').fadeIn();\n        });\n        \$('#btnResolveAuthError').click(function(e) {\n            e.preventDefault();\n            \$('#registerFormContainer').hide();\n            \$('#loginFormContainer').removeClass('hidden').show();\n            \$('#loginModal').modal('show');\n        });\n\n        \$('body').on('click', '.modal-mc-service .btn-login', function(e) {\n            e.preventDefault();\n            \$('#alertLoginFailed').addClass('hidden');\n            \$('#registerFormContainer').hide();\n            \$('#loginFormContainer').removeClass('hidden').show();\n            \$('#loginModal').modal('show');\n            \$('#modalAjax').modal('hide');\n        });\n\n        \$('body').on('click', '.modal-mc-service .btn-register', function(e) {\n            e.preventDefault();\n            \$('#alertRegisterFailed').addClass('hidden');\n            \$('#registerFormContainer').removeClass('hidden').show();\n            \$('#loginFormContainer').hide();\n            \$('#loginModal').modal('show');\n            \$('#modalAjax').modal('hide');\n        });\n\n        \$('body').on('click', '.modal-mc-service .do-advanced-setup-mode', function(e) {\n            e.preventDefault();\n            var service = \$('#btnActivate').data('service');\n            if (!\$('.panel-market-account').hasClass('account-linked')) {\n                \$('#modalAjax').modal('hide');\n                \$('#loginModal').modal('show');\n                \$('#returnAction').val(service + '-advanced');\n            } else {\n                \$('#activate-simple').hide();\n                \$('#activate-advanced').removeClass('hidden').show();\n            }\n        });\n\n        \$('body').on('click', '.modal-mc-service .do-simple-setup-mode', function(e) {\n            e.preventDefault();\n            \$('#activate-advanced').hide();\n            \$('#activate-simple').removeClass('hidden').show();\n        });\n\n        \$('body').on('click', '.modal-mc-service .toggle-pricing, .modal-mc-service .btn-manage-pricing', function(e) {\n            e.preventDefault();\n            var product = \$(this).closest('.product');\n            var pricing = product.find('.pricing');\n            \$(this).parent('div').parent('div')\n                .find('input.product-status')\n                .parent('div').parent('div')\n                .tooltip('hide')\n                .end();\n            if (pricing.is(':visible')) {\n                pricing.slideUp();\n                product.find('.toggle-pricing i').removeClass('fa-chevron-down').addClass('fa-chevron-right');\n            } else {\n                pricing.hide().removeClass('hidden').slideDown();\n                product.find('.toggle-pricing i').addClass('fa-chevron-down').removeClass('fa-chevron-right');\n            }\n        });\n\n        \$('body').on('click', '.modal-mc-service .btn-save-pricing', function(e) {\n            e.preventDefault();\n            var btn = \$(this),\n                originalBtnLabel = btn.html();\n            btn.parents('li').find('input.product-status').parent('div').parent('div').tooltip('hide').end();\n            btn.html('<i class=\"fas fa-spinner fa-spin\"></i> ";
echo AdminLang::trans("global.saving");
echo "')\n                .addClass('disabled')\n                .prop('disabled', 'disabled');\n            WHMCS.http.jqClient.post('marketconnect.php', 'action=setPricing&token=' + csrfToken + '&' + \$(this).closest('div.pricing').find('form').serialize(), function(data) {\n                if (data.error) {\n                    swal(\"Uh oh!\", data.error, \"error\");\n                }\n                btn.html('<i class=\"fas fa-check\"></i> ";
echo AdminLang::trans("global.saved");
echo "');\n                setTimeout(function() {\n                    btn.html(originalBtnLabel).removeProp('disabled').removeClass('disabled');\n                }, 2000);\n            }, 'json');\n        });\n\n        \$('body').on('click', '.modal-mc-service .btn-restore-default-pricing', function(e) {\n            e.preventDefault();\n            \$(this).closest('div.pricing').find('.price-field').each(function(){\n                \$(this).val(\$(this).data('default-price'));\n            });\n        });\n\n        \$('body').on('click', '.modal-mc-service .btn-sso-service', function(e) {\n            e.preventDefault();\n            var btn = \$(this);\n            var originalBtnLabel = btn.html();\n            \$(this).html('<i class=\"fas fa-spinner fa-spin\"></i> Connecting to service...');\n            WHMCS.http.jqClient.post('marketconnect.php', 'action=ssoForService&service=' + \$(this).data('service') + '&token=' + csrfToken, function(data) {\n                if (data.error) {\n                    swal(\"Sign-In Failed\", data.error, \"error\");\n                } else {\n                    window.open(data.redirectUrl);\n                }\n                btn.html(originalBtnLabel);\n            }, 'json');\n        })\n            .on('click', '.modal-mc-service .btn-sso-client-service', function(e) {\n                e.preventDefault();\n                var btn = \$(this),\n                    originalBtnLabel = btn.html();\n                btn.html('<i class=\"fas fa-spinner fa-spin\"></i>')\n                    .addClass('disabled')\n                    .prop('disabled', 'disabled');\n                WHMCS.http.jqClient.post(\n                    'marketconnect.php',\n                    'action=ssoForServiceId&serviceId=' + \$('#serviceId')[0].selectize.getValue() + '&token=' + csrfToken,\n                    function(data) {\n                        if (data.error) {\n                            swal(\"Sign-In Failed\", data.error, \"error\");\n                        } else {\n                            window.open(data.redirectUrl);\n                        }\n                        btn.html(originalBtnLabel).removeProp('disabled').removeClass('disabled');\n                    },\n                    'json'\n                );\n            });\n\n        \$('body').on('switchChange.bootstrapSwitch', '.modal-mc-service .product-status', function(event, state) {\n            if (!\$(this).closest('ul').hasClass('activation')) {\n                var productKey = \$(this).data('productkey'),\n                    action = state ? 'enableProduct' : 'disableProduct',\n                    self = \$(this);\n\n                WHMCS.http.jqClient.jsonPost(\n                    {\n                        url: '',\n                        data: {\n                            action: action,\n                            productkey: productKey,\n                            token: csrfToken\n                        },\n                        error: function(error) {\n                            jQuery.growl.warning(\n                                {\n                                    title: '',\n                                    message: error\n                                }\n                            );\n                            self.bootstrapSwitch('state', !(state), true);\n                        },\n                        fail: function() {\n                            jQuery.growl.warning(\n                                {\n                                    title: '',\n                                    message: 'Session Expired. Please reload the page before continuing.'\n                                }\n                            );\n                        }\n                    }\n                );\n            }\n        });\n\n        \$('body').on('switchChange.bootstrapSwitch', '.modal-mc-service .promo-switch', function(event, state) {\n            if (\$(this).closest('div.tab-pane').prop('id') == 'settings') {\n                var promo = \$(this).data('promo');\n                var service = \$(this).data('service');\n                WHMCS.http.jqClient.post('marketconnect.php', 'action=setPromoStatus&promo=' + promo + '&service=' + service + '&state=' + state + '&token=' + csrfToken\n                );\n            }\n        });\n\n        \$('body').on('switchChange.bootstrapSwitch', '.modal-mc-service .setting-switch', function(event, state) {\n            if (\$(this).closest('div.tab-pane').prop('id') == 'other') {\n                var name = \$(this).data('name');\n                var service = \$(this).data('service');\n                WHMCS.http.jqClient.post('marketconnect.php', 'action=setGeneralSetting&name=' + name + '&service=' + service + '&state=' + state + '&token=' + csrfToken\n                );\n            }\n        });\n\n        \$('body').on('click', '.modal-mc-service .advanced-mode .steps a:not(\".mode-label\")', function(e) {\n            \$('.modal-mc-service .advanced-mode .steps a').removeClass('active');\n            \$(this).addClass('active');\n        });\n\n        \$('body').on('shown.bs.tab', '.modal-mc-service .advanced-mode .steps a[data-toggle=\"tab\"]', function(e) {\n            if (\$(e.target).attr('href') == '#activate-advanced-finish') {\n                \$('.modal-mc-service .advanced-mode .btn-next').fadeOut('fast', function() {\n                    \$('.modal-mc-service .advanced-mode .btn-activate').hide().removeClass('hidden').fadeIn();\n                });\n            } else {\n                \$('.modal-mc-service .advanced-mode .btn-activate').fadeOut('fast', function() {\n                    \$('.modal-mc-service .advanced-mode .btn-next').fadeIn();\n                });\n            }\n        });\n\n        \$('body').on('click', '.modal-mc-service .advanced-mode .btn-next', function(e) {\n            var currentTab = \$('.modal-mc-service .advanced-mode .steps a.active').attr('href');\n            if (currentTab == '#activate-advanced-products') {\n                \$('.modal-mc-service .advanced-mode .steps a[href=\"#activate-advanced-promos\"]').click();\n            } else {\n                \$('.modal-mc-service .advanced-mode .steps a[href=\"#activate-advanced-finish\"]').click();\n            }\n        });\n\n        \$('body').on('click', '.btn-mc-service-control,.btn-login-create-account', function(e) {\n            if (tour) {\n                tour.end();\n            }\n            \$('#alertRegisterFailed').addClass('hidden');\n            \$('#alertLoginFailed').addClass('hidden');\n        })\n            .on('change', 'input:checkbox[name^=\"enabled[\"]', function() {\n                var productKey = \$(this).data('product-key'),\n                    checked = \$('input:checkbox:checked[data-product-key=\"' + productKey + '\"]');\n                if (checked.length === 0) {\n                    \$(this).prop('checked', 'checked');\n                    \$('input.product-status[data-productkey=\"' + productKey + '\"')\n                        .parent('div').parent('div')\n                        .data('toggle', 'tooltip')\n                        .data('trigger', 'manual')\n                        .data('placement', 'bottom auto')\n                        .attr(\n                            'title',\n                            'At least one term must be enabled. Slide this toggle to remove the product from sale.'\n                        )\n                        .tooltip('show');\n                } else {\n                    \$('input.product-status[data-productkey=\"' + productKey + '\"')\n                        .parent('div').parent('div')\n                        .tooltip('hide');\n                }\n            })\n            .on('switchChange.bootstrapSwitch', 'input.product-status', function(event, state) {\n                \$(this).parent('div').parent('div').tooltip('hide');\n            });\n        function getAdvancedSettings () {\n            var advancedSettings = {\n                products: {\n                    disabled: [],\n                    pricing: []\n                },\n                promotions: [],\n                general: [],\n            };\n\n            /** Get products that should be disabled **/\n            jQuery('input.product-status').not(':checked').each(function(i, e) {\n                advancedSettings.products.disabled.push(jQuery(e).data('productkey'));\n            });\n\n            /** Get promotions that should be disabled **/\n            jQuery('input.promo-switch').each(function(i, e) {\n                var input = jQuery(e);\n                advancedSettings.promotions.push({\n                    name: input.data('promo'),\n                    state: (input.is(':checked')) ? 1 : 0\n                });\n            });\n\n            jQuery('input.setting-switch').each(function(i, e) {\n                var input = jQuery(e);\n                advancedSettings.general.push({\n                    name: input.data('name'),\n                    state: (input.is(':checked')) ? 1 : 0\n                });\n            });\n\n            /** Get pricing for products **/\n            jQuery('ul.products form').each(function (i, e){\n                var pricingData = encodeURIComponent(jQuery(e).serialize());\n                advancedSettings.products.pricing.push(pricingData);\n            });\n\n            return advancedSettings;\n        }\n        \$(document).on('click', '.btn-activate', function() {\n            var service = \$(this).data('service');\n            if (!\$('.panel-market-account').hasClass('account-linked')) {\n                \$('#modalAjax').modal('hide');\n                \$('#loginModal').modal('show');\n                \$('#returnAction').val(service);\n            } else {\n                \$(this).html('<i class=\"fas fa-spinner fa-spin\"></i> Activating...').prop('disabled', true);\n                var advancedSettings = {};\n                if (jQuery(this).hasClass('btn-activate-advanced')) {\n                    advancedSettings = getAdvancedSettings();\n                }\n                WHMCS.http.jqClient.post('marketconnect.php', 'action=activate&service=' + service + '&token=' + csrfToken + '&advancedSettings=' + JSON.stringify(advancedSettings), function (data) {\n                    if (data.success) {\n                        \$('#modalAjax').modal('hide');\n                        swal(\"Success!\", \"Service activated successfully!\", \"success\");\n                        \$('#btnManage-' + service).removeClass('hidden').show();\n                        \$('#btnStart-' + service).hide();\n                        \$('.btn-activate').html('Activate').prop('disabled', false);\n                    } else {\n                        var error = data.error;\n                        if (!error) {\n                            error = 'An unknown error occurred. Please try again or contact support.';\n                        }\n                        swal(\"Uh oh!\", error, \"error\");\n                        \$('.btn-activate').html('Activate').prop('disabled', false);\n                    }\n                }, 'json');\n            }\n        });\n        \$(document).on('click', '.btn-deactivate', function() {\n            var service = \$(this).data('service');\n            swal({\n                    title: \"Are you sure?\",\n                    text: \"Deactivating this MarketConnect service will hide all products and prevent new orders being placed. It will not affect existing provisioned services.\",\n                    type: \"warning\",\n                    showCancelButton: true,\n                    confirmButtonColor: \"#DD6B55\",\n                    confirmButtonText: \"Yes, deactivate it\",\n                    closeOnConfirm: false\n                },\n                function(){\n                    WHMCS.http.jqClient.post('marketconnect.php', 'action=deactivate&service=' + service + '&token=' + csrfToken, function(data) {\n                        \$('#modalAjax').modal('hide');\n                        if (data.success) {\n                            \$('#btnManage-' + service).hide();\n                            \$('#btnStart-' + service).removeClass('hidden').show();\n                            swal(\"Service Deactivated\", \"This service has now been removed from sale.\", \"success\");\n                        } else {\n                            var error = data.error;\n                            if (!error) {\n                                error = 'An unknown error occurred. Please try again or contact support.';\n                            }\n                            swal(\"Uh oh!\", error, \"error\");\n                        }\n                    }, 'json');\n                });\n        });\n        ";
if ($learnMore) {
    echo "        \$('#btnLearnMore-";
    echo $learnMore;
    echo "').click();\n        ";
}
echo "        ";
if ($activateService) {
    echo "        \$('#btnStart-";
    echo $activateService;
    echo "').click();\n        ";
}
echo "        ";
if ($manageService) {
    echo "        \$('#btnManage-";
    echo $manageService;
    echo "').click();\n        ";
}
echo "    });\n</script>\n";

?>